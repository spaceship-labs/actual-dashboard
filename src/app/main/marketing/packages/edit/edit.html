<div id="simple-table" class="page-layout simple fullwidth doc-page element-doc-page">

    <div class="content">


      <div class="page-layout simple fullwidth">

        <section class="md-whiteframe-z1">
          <md-toolbar class="demo-toolbar md-primary">
            <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
              <h3>EDITAR PAQUETE</h3>

              <md-button type="submit" class="md-raised md-accent action-button" aria-label="Actualizar"
                        ng-click="vm.update(updateForm)">
                  Actualizar
              </md-button>

            </div>
          </md-toolbar>
          <md-content class="md-padding">


            <div ng-show="vm.isLoading" layout="row" layout-sm="column" layout-align="space-around">
              <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
            </div>

            <form name="updateForm" ng-show="!vm.isLoading" ng-submit="vm.update(updateForm)" class="md-inline-form" novalidate>

              <h1><strong>Tiendas aplicables</strong></h1>
              <section>
                <p class="select-element-label"><label><strong>Tienda</strong></label></p>
                <md-input-container class="checkboxes-dropdown-wrap">
                  <md-select class="checkboxes-dropdown select-element" ng-model="vm.selectedStores"
                     data-md-container-class="selectdemoSelectHeader"
                     multiple
                  >
                    <md-optgroup label="Tiendas">
                      <md-option
                        ng-value="store.id"
                        ng-selected="vm.objIndexOf(vm.packageGroup.Stores, {id:store.id})"
                        ng-repeat="store in vm.companies">
                        {{store.WhsName}}
                      </md-option>
                    </md-optgroup>
                  </md-select>
                </md-input-container>
              </section>


              <h1><strong>Productos</strong></h1>
              <section class="products-package">
                <div layout="row" class="table-header">
                  <div flex class="table-header-item">CÃ³digo de producto</div>
                  <div flex class="table-header-item">Producto</div>
                  <div flex class="table-header-item">Precio unitario</div>
                  <div flex class="table-header-item">Articulos por paquete</div>
                  <div flex class="table-header-item">Total</div>
                  <div flex class="table-header-item">Descuento paquete</div>
                  <div flex class="table-header-item">Tipo de descuento</div>
                  <div flex class="table-header-item">Total con descuento</div>
                </div>
                <div
                  class="product-item"
                  layout="row"
                  layout-align="center start"
                  ng-repeat="product in vm.products"
                >
                  <div flex class="table-body-item">
                    <a ng-href="/products/edit/{{product.ItemCode}}" target="_blank">
                      {{product.ItemCode}}
                    </a>
                  </div>
                  <div flex class="table-body-item">{{product.Name || product.ItemCode}}</div>
                  <div flex class="table-body-item">{{product.Price | currency}}</div>
                  <div flex class="table-body-item">
                    <div class="input-element">
                      <div class="input-element-inner">
                        <input type="number" ng-model="product.packageInfo.quantity" min="1" required placeholder="Cantidad">
                      </div>
                    </div>
                  </div>
                  <div flex class="table-body-item">
                    {{ (product.Price * product.packageInfo.quantity) | currency }}
                  </div>
                  <div flex class="table-body-item">
                    <div class="input-element">
                      <div class="input-element-inner">
                        <input type="number" min="0" ng-model="product.packageInfo.discount" required placeholder="Descuento">
                      </div>

                      <p>
                        <a
                          ng-click="product.showDiscounts = !product.showDiscounts"
                          href="#"
                        >
                          Configurar grupos de pago
                        </a>
                      </p>
                    </div>

                    <section ng-show="product.showDiscounts" class="discounts-groups">

                      <div class="input-element">
                        <label class="label-element">Grupo pago 2</label>
                        <div class="input-element-inner">
                          <input type="number" min="0" ng-model="product.packageInfo.discountPg2" required placeholder="Descuento">
                        </div>
                      </div>

                      <div class="input-element">
                        <label class="label-element">Grupo pago 3</label>
                        <div class="input-element-inner">
                          <input type="number" min="0" ng-model="product.packageInfo.discountPg3" required placeholder="Descuento">
                        </div>
                      </div>


                      <div class="input-element">
                        <label class="label-element">Grupo pago 4</label>
                        <div class="input-element-inner">
                          <input type="number" min="0" ng-model="product.packageInfo.discountPg4" required placeholder="Descuento">
                        </div>
                      </div>

                      <div class="input-element">
                        <label class="label-element">Grupo pago 5</label>
                        <div class="input-element-inner">
                          <input type="number" min="0" ng-model="product.packageInfo.discountPg5" required placeholder="Descuento">
                        </div>
                      </div>

                    </section>

                  </div>
                  <div flex class="table-body-item">
                    <div class="select-element-wrapper select-element-wrapper-nomargin" flex>
                      <md-input-container>
                        <md-select
                          class="select-element"
                          placeholder="Tipo"
                          ng-model="product.packageInfo.discountType"
                        >
                          <md-option value="ammount">Cantidad</md-option>
                          <md-option value="percentage">Porcentaje</md-option>
                        </md-select>
                      </md-input-container>
                    </div>
                  </div>
                  <div flex class="table-body-item">
                    {{ vm.calculateDiscount(product) | currency }}
                  </div>
                </div>
                <div class="products-package-total-price">
                  <p><strong>Total: {{vm.calculateTotalDiscount() | currency}}</strong></p>
                </div>

              </section>

              <div>
                <md-button
                  type="submit"
                  class="md-raised md-accent action-button"
                  aria-label="Actualizar"
                >
                    Actualizar
                </md-button>
              </div>

            </form>

          </md-content>

          <!--<div form-helper flex="80"></div>-->
        </section>


    </div>
    <!-- / CONTENT -->
  </div>

</div>
