<div id="simple-table" class="page-layout simple fullwidth doc-page element-doc-page">

    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div layout="column" layout-align="center start">
            <div class="title">Usuarios</div>
        </div>
    </div>
    <!-- / HEADER -->

    <!-- CONTENT -->
    <div class="content">


      <div class="page-layout simple fullwidth">

        <section class="md-whiteframe-z1">
          <md-toolbar class="demo-toolbar md-primary">
            <div class="md-toolbar-tools">
              <h3>Registrar usuario</h3>
            </div>
          </md-toolbar>
          <md-content class="md-padding">

            <form name="basicForm" flex="80" ng-submit="vm.sendForm($event)" class="md-inline-form" novalidate>

              <div class="input-element">
                <label>Nombre*</label>
                <div class="input-element-inner">
                  <input type="text" ng-model="vm.user.firstName" name="firstname" required placeholder="Nombre*">
                </div>
                <div ng-messages="basicForm.firstname.$error" ng-show="basicForm.firstname.$touched"
                     role="alert">
                    <div ng-message="required">
                        <span>Este campo es requerido.</span>
                    </div>
                </div>
              </div>

              <div class="input-element">
                <label>Apellidos*</label>
                <div class="input-element-inner">
                  <input type="text" name="lastname" ng-model="vm.user.lastName" placeholder="Apellidos"
                               required>
                </div>
                <div ng-messages="basicForm.lastname.$error" ng-show="basicForm.lastname.$touched"
                     role="alert">
                    <div ng-message="required">
                        <span>Este campo es requerido.</span>
                    </div>
                </div>
              </div>

              <div class="input-element">
                <label>Email*</label>
                <div class="input-element-inner">
                  <input type="email" name="email" ng-model="vm.user.email" placeholder="Email"
                             translate
                             ng-pattern="/^.+@.+\..+$/" required>
                </div>
                <div ng-messages="basicForm.email.$error" ng-show="basicForm.email.$touched" role="alert" multiple>
                    <div ng-message="required">
                        <span translate="LOGIN.ERRORS.EMAIL_REQUIRED">Este campo es requerido</span>
                    </div>
                    <div ng-message="pattern">
                        <span translate="LOGIN.ERRORS.EMAIL_MUST_VALID">E-mail invalido</span>
                    </div>
                </div>
              </div>

              <div class="input-element">
                <label>Contraseña*</label>
                <div class="input-element-inner">
                  <input type="password" name="password" ng-model="vm.user.password" placeholder="Contraseña*"
                       required>
                </div>
                <div ng-messages="basicForm.password.$error" ng-show="basicForm.password.$touched"
                     role="alert">
                    <div ng-message="required">
                        <span>Este campo es requerido.</span>
                    </div>
                </div>
              </div>

              <div class="input-element">
                <label>Confirmar contraseña*</label>
                <div class="input-element-inner">
                  <input type="password" name="confirmPassword" ng-model="vm.user.confirmPassword" placeholder="Confirmar contraseña"
                               required>
                </div>
                <div ng-messages="basicForm.confirmPassword.$error" ng-show="basicForm.confirmPassword.$touched"
                     role="alert">
                    <div ng-message="required">
                        <span>Este campo es requerido.</span>
                    </div>
                </div>
                <div ng-show="vm.user.confirmPassword != vm.user.password && basicForm.confirmPassword.$touched"
                     role="alert">
                    <div class="ng-message">
                        <span>El campo de contraseña y confirmar contraseña deben coincidir</span>
                    </div>
                </div>
              </div>

              <div class="input-element ">
                <p class="select-element-label"><label><strong>Rol</strong></label></p>
                <md-input-container>
                  <md-select class="select-element select-element-lg" ng-model="vm.user.userType">
                    <md-option ng-repeat="role in vm.roles track by $index" value="{{role.handle}}">
                      {{role.name}}
                    </md-option>
                  </md-select>
                </md-input-container>
              </div>

              <!--Tienda-->
              <div class="input-element">
                <p class="select-element-label"><label><strong>Tienda</strong></label></p>
                <md-input-container>
                  <md-select class="select-element select-element-lg" ng-model="vm.user.company">
                    
                    <md-option ng-repeat="company in vm.companies track by $index" ng-value="company.handle">
                      {{company.label}}
                    </md-option>
                  </md-select>
                </md-input-container>
              </div>
              <!--Tienda-->  

              <!--MODULES CHOOSER-->
              <div>
                <h2><strong>Modulos</strong></h2>
                <md-checkbox class="spaced-checkbox block-checkbox"  ng-model="allAppModules.selected">TODOS</md-checkbox>
                <div>
                  <div ng-repeat="appModule in vm.appModules">
                    <md-checkbox class="spaced-checkbox block-checkbox"  ng-model="appModule.selected">{{appModule.label}}</md-checkbox>
                    <div class="submodules-list" ng-if="appModule.subModules.length > 0">
                      <md-checkbox class="spaced-checkbox block-checkbox" ng-repeat="subModule in appModule.subModules" ng-model="subModule.selected">{{subModule.label}}</md-checkbox>                  
                    </div>                  
                  </div>

                </div>
              </div>
              <!--END MODULES CHOOSER-->                          

              <div>
                <md-button type="submit" class="md-raised md-accent action-button" aria-label="Guardar"
                           ng-disabled="basicForm.$invalid || basicForm.$pristine || vm.isLoading">
                    Registrar
                </md-button>
              </div>

            </form>

          </md-content>

          <!--<div form-helper flex="80"></div>-->
        </section>


    </div>
    <!-- / CONTENT -->
  </div>

</div>
