<div id="simple-table" class="page-layout simple fullwidth doc-page element-doc-page">

    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div layout="column" layout-align="center start">
            <div class="title">Configuración</div>
        </div>
    </div>
    <!-- / HEADER -->

    <!-- CONTENT -->
    <div class="content">

        <div class="white-bg md-whiteframe-4dp">


          <section class="md-whiteframe-z1">
            <md-toolbar class="demo-toolbar md-primary">
              <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
                <h3>Configuración de sitio</h3>
              </div>
            </md-toolbar>
            <md-content class="md-padding">

              <div ng-show="vm.isLoading" layout="row" layout-sm="column" layout-align="space-around">
                <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
              </div>

              <section ng-if="!vm.isLoading">

                <div class="site-settings">

                  <h2>{{vm.site.name}}</h2>

                  <div
                    ng-show="vm.site.isLoading"
                    layout="row"
                    layout-sm="column"
                    layout-align="space-around">
                    <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
                  </div>

                  <form
                    ng-show="!vm.site.isLoading"
                    name="updateForm"
                    novalidate
                    ng-submit="vm.update(updateForm, vm.site)"
                  >

                    <div class="input-element textarea-element">
                      <label>Texto detalles de la entrega*</label>
                      <div class="input-element-inner">
                        <textarea ui-tinymce="tinymceOptions" required  ng-model="vm.site.deliveryText"></textarea>
                      </div>
                    </div>

                    <!--IMAGENES EXTRA-->
                    <h2><strong>BANNERS</strong></h2>

                    <div ng-show="vm.isLoadingFiles" layout="row" layout-sm="column" layout-align="space-around">
                      <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
                    </div>
                    <ul ng-show="!vm.isLoadingFiles" class="draggable-list draggable-list-row" dnd-list="vm.site.Banners" layout="row" layout-wrap>
                      <li
                        ng-repeat="file in vm.site.Banners"
                        class="noright"
                        flex="20"
                        dnd-draggable="file"
                        dnd-moved="vm.site.Banners.splice($index, 1)"
                        dnd-selected="vm.selectedFile = file"
                        ng-click='file.selected = !file.selected'
                        ng-class="vm.fileClass(file)"
                        dnd-effect-allowed="move">

                          <img ngf-thumbnail="vm.api.baseUrl+'/uploads/'+vm.dir+'/600x600'+file.filename || 'assets/images/product.png'">

                          <div class="input-element">
                            <label>Texto</label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="file.displayText" name="displayText" placeholder="Texto" >
                            </div>
                          </div>

                          <div class="input-element">
                            <label>URL</label>
                            <div class="input-element-inner">
                              <input type="text" ng-model="file.displayUrl" name="displayUrl" placeholder="Texto" >
                            </div>
                          </div>

                          <div class="input-element">
                            <md-checkbox name="newTab" ng-model="file.newTab">
                              <label>Abrir en otra pestaña</label>
                            </md-checkbox>
                          </div>

                      </li>
                    </ul>

                    <md-button
                      class="file-manager-btn md-raised md-primary"
                      ngf-select="vm.uploadFiles($files)"
                      ng-disabled="vm.isLoadingFiles"
                      multiple="multiple">Subir imagenes</md-button>

                    <md-button
                      ng-if="vm.site.Banners.length > 0"
                      class="md-raised md-warn"
                      ng-click="vm.removeFiles()"
                      ng-disabled="vm.isLoadingFiles">Eliminar archivos seleccionados</md-button>
                    <!--END IMAGENES EXTRA-->


                    <div>
                      <md-button class="md-raised md-primary action-button" type="submit">
                        Actualizar
                      </md-button>
                    </div>

                  </form>
                </div>
                <!--TOP PRODUCTS-->
                <div>
                  <h2><strong>TOP SALAS</strong></h2>

                  <md-autocomplete
                      md-no-cache="false"
                      md-selected-item="vm.selectedSalaProduct"
                      md-search-text="vm.searchSalas"
                      md-items="item in vm.queryProducts(vm.searchSalas)"
                      md-selected-item-change="vm.selectedItemChange(item, 'salas', '57436fb9ef7d5e62e508e1bd')"
                      md-item-text="item.ItemCode + ' ' + item.ItemName"
                      md-min-length="0"
                      placeholder="Buscar producto">
                    <md-item-template>
                      <span md-highlight-text="vm.searchSalas" md-highlight-flags="^i">{{item.ItemCode}} | {{item.ItemName}}</span>
                    </md-item-template>
                    <md-not-found>
                      No se encontro "{{vm.searchSalas}}".
                    </md-not-found>
                  </md-autocomplete>



                  <div ng-show="vm.isLoadingProducts" layout="row" layout-sm="column" layout-align="space-around">
                    <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
                  </div>

                  <ul ng-if="!vm.isLoadingProducts" class="draggable-list" dnd-list="vm.group.featuredproducts">
                    <li
                      ng-repeat="featuredSalas in vm.featuredproducts | filter:{ categoryHandle: 'salas' }"
                      class="noright"
                      layout="row"
                      layout-align="space-between center"
                      dnd-draggable="featuredSalas"
                      dnd-moved="vm.featuredproducts.splice($index, 1)"
                      dnd-selected="vm.selectedproduct = featuredSalas"
                      ng-class="{'selected-item': vm.selectedproduct === featuredSalas}"
                      dnd-effect-allowed="move">
                      <p>{{featuredSalas.product.ItemCode}} | {{ featuredSalas.product.ItemName }}</p>
                      <div class="md-secondary">
                        <md-button ng-click="vm.removeProductFromGroup(featuredSalas.product.id, $index)" class="md-raised md-warn">
                          Remover
                        </md-button>
                      </div>
                    </li>
                  </ul>


                </div>

                <div>
                  <h2><strong>TOP COMEDORES</strong></h2>

                  <md-autocomplete
                      md-no-cache="false"
                      md-selected-item="vm.selectedComedorProduct"
                      md-search-text="vm.searchComedores"
                      md-items="item in vm.queryProducts(vm.searchComedores)"
                      md-selected-item-change="vm.selectedItemChange(item, 'comedores', '57436fb9ef7d5e62e508e1da')"
                      md-item-text="item.ItemCode + ' ' + item.ItemName"
                      md-min-length="0"
                      placeholder="Buscar producto">
                    <md-item-template>
                      <span md-highlight-text="vm.searchComedores" md-highlight-flags="^i">{{item.ItemCode}} | {{item.ItemName}}</span>
                    </md-item-template>
                    <md-not-found>
                      No se encontro "{{vm.searchComedores}}".
                    </md-not-found>
                  </md-autocomplete>

                  <div ng-show="vm.isLoadingProducts" layout="row" layout-sm="column" layout-align="space-around">
                    <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
                  </div>

                  <ul ng-if="!vm.isLoadingProducts" class="draggable-list" dnd-list="vm.group.featuredproducts">
                    <li
                      ng-repeat="featuredComedores in vm.featuredproducts | filter:{ categoryHandle: 'comedores' }"
                      class="noright"
                      layout="row"
                      layout-align="space-between center"
                      dnd-draggable="featuredComedores"
                      dnd-moved="vm.featuredproducts.splice($index, 1)"
                      dnd-selected="vm.selectedproduct = featuredComedores"
                      ng-class="{'selected-item': vm.selectedproduct === featuredComedores}"
                      dnd-effect-allowed="move">
                      <p>{{featuredComedores.product.ItemCode}} | {{ featuredComedores.product.ItemName }}</p>
                      <div class="md-secondary">
                        <md-button ng-click="vm.removeProductFromGroup(featuredComedores.product.id, $index)" class="md-raised md-warn">
                          Remover
                        </md-button>
                      </div>
                    </li>
                  </ul>

                </div>

                <div>
                  <h2><strong>TOP RECÁMARAS</strong></h2>

                  <md-autocomplete
                      md-no-cache="false"
                      md-selected-item="vm.selectedRecamaraProduct"
                      md-search-text="vm.searchRecamaras"
                      md-items="item in vm.queryProducts(vm.searchRecamaras)"
                      md-selected-item-change="vm.selectedItemChange(item, 'recamaras', '57436fb9ef7d5e62e508e1bf')"
                      md-item-text="item.ItemCode + ' ' + item.ItemName"
                      md-min-length="0"
                      placeholder="Buscar producto">
                    <md-item-template>
                      <span md-highlight-text="vm.searchRecamaras" md-highlight-flags="^i">{{item.ItemCode}} | {{item.ItemName}}</span>
                    </md-item-template>
                    <md-not-found>
                      No se encontro "{{vm.searchRecamaras}}".
                    </md-not-found>
                  </md-autocomplete>

                  <div ng-show="vm.isLoadingProducts" layout="row" layout-sm="column" layout-align="space-around">
                    <md-progress-circular class="md-accent" md-diameter="96" md-mode="indeterminate"></md-progress-circular>
                  </div>

                  <ul ng-if="!vm.isLoadingProducts" class="draggable-list" dnd-list="vm.group.featuredproducts">
                    <li
                      ng-repeat="featuredRecamaras in vm.featuredproducts | filter:{ categoryHandle: 'recamaras' }"
                      class="noright"
                      layout="row"
                      layout-align="space-between center"
                      dnd-draggable="featuredRecamaras"
                      dnd-moved="vm.featuredproducts.splice($index, 1)"
                      dnd-selected="vm.selectedproduct = featuredRecamaras"
                      ng-class="{'selected-item': vm.selectedproduct === featuredRecamaras}"
                      dnd-effect-allowed="move">
                      <p>{{featuredRecamaras.product.ItemCode}} | {{ featuredRecamaras.product.ItemName }}</p>
                      <div class="md-secondary">
                        <md-button ng-click="vm.removeProductFromGroup(featuredRecamaras.product.id, $index)" class="md-raised md-warn">
                          Remover
                        </md-button>
                      </div>
                    </li>
                  </ul>

                </div>
                <!--TOP PRODUCTS-->

              </section>

            </md-content>
          </section>


        </div>

    </div>
    <!-- / CONTENT -->

</div>
